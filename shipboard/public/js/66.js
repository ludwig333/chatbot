(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"38S9":function(t,e,n){"use strict";n.r(e);var a={props:{value:{type:String,default:null}},data:function(){return{content:this.value}},mounted:function(){this.autosize()},watch:{value:function(t){this.content=t}},methods:{autosize:function(){this.$el.style.height="inherit";var t=window.getComputedStyle(this.$el),e=parseInt(t.getPropertyValue("border-top-width"),10)+parseInt(t.getPropertyValue("padding-top"),10)+this.$el.scrollHeight+parseInt(t.getPropertyValue("padding-bottom"),10)+parseInt(t.getPropertyValue("border-bottom-width"),10);this.$el.style.height=e+"px"}}},s=n("KHd+"),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-textarea w-full block resize-none",domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},function(e){t.autosize(),t.$emit("input",t.content)}]}})}),[],!1,null,null,null).exports,i=n("eeMe"),r=n.n(i),l={components:{VTextareaExapandable:o},props:{value:{type:String,default:null},taskUuid:{type:String,required:!0},projectUuid:{type:String,required:!0}},data:function(){return{content:this.value,attachments:[],dropzone:null,uploading:!1}},watch:{value:function(t){this.content=t}},mounted:function(){var t=this;this.dropzone=new r.a(this.$refs.dz,{clickable:this.$refs.btn_attach,headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},url:route("app:project.task.attachments.store",{project:this.projectUuid,task:this.taskUuid}),previewTemplate:this.$refs.attachment.innerHTML}),this.dropzone.on("sending",(function(e,n,a){t.uploading=!0,a.append("_token",document.head.querySelector('meta[name="csrf-token"]').content),a.append("uuid",e.upload.uuid)})),this.dropzone.on("queuecomplete",(function(){t.uploading=!1})),this.dropzone.on("removedfile",(function(e){t.attachments=t.attachments.filter((function(t){return e.upload.uuid!==t}))})),this.dropzone.on("success",(function(e,n){e.previewElement.querySelector(".dz-progress").remove(),t.attachments.push(n.uuid)}))},methods:{submit:function(){var t=this;this.$inertia.post(route("app:project.task.comments.store",{project:this.projectUuid,task:this.taskUuid}),{content:this.content,attachments:this.attachments}).then((function(){t.$emit("submitted"),t.reset()}))},reset:function(){this.content="",this.attachments=[],this.dropzone.removeAllFiles(!0)}}},c=Object(s.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col rounded-lg shadow-sm border border-gray-300"},[n("v-textarea-exapandable",{staticClass:"border-none shadow-none focus:outline-none focus:shadow-none rounded-lg",attrs:{placeholder:t.$trans("placeholders.write-something")},on:{input:function(e){return t.$emit("input",t.content)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("div",{staticClass:"mt-2 px-3 pb-3 flex items-center justify-between"},[n("div",[n("button",{staticClass:"btn btn-sm btn-indigo",attrs:{type:"button",disabled:!t.content||t.uploading},on:{click:function(e){return t.submit()}}},[n("svg",{staticClass:"w-3 h-3 mr-1.5 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M0 0l20 10L0 20V0zm0 8v4l10-2L0 8z"}})]),t._v("\n                "+t._s(t.$trans("labels.send"))+"\n            ")])]),t._v(" "),n("div",[n("span",{staticClass:"btn-group shadow-none"},[n("button",{ref:"btn_attach",staticClass:"btn btn-sm btn-flat",attrs:{type:"button"}},[n("svg",{staticClass:"w-4 h-4",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{d:"M15 3H7a7 7 0 1 0 0 14h8v-2H7A5 5 0 0 1 7 5h8a3 3 0 0 1 0 6H7a1 1 0 0 1 0-2h8V7H7a3 3 0 1 0 0 6h8a5 5 0 0 0 0-10z"}})])])])])]),t._v(" "),n("div",{ref:"dz",staticClass:"flex flex-col"}),t._v(" "),n("script",{ref:"attachment",attrs:{type:"text/x-template"}},[t._v('\n        <div class="flex flex-col">\n            <div class="pl-3 pr-4 py-3 flex items-center justify-between text-sm leading-5">\n                <div class="w-0 flex-1 flex items-center">\n                    <svg class="flex-shrink-0 h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">\n                        <path fill-rule="evenodd" d="M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z" clip-rule="evenodd"></path>\n                    </svg>\n\n                    <span class="ml-2 truncate" data-dz-name></span>\n                </div>\n\n                <div class="ml-4 flex-shrink-0">\n                    <button type="button" class="btn btn-flat btn-xs" data-dz-remove>\n                        <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 fill-current">\n                            <path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <div class="dz-progress flex w-full h-1 rounded-b-lg px-4 mb-4">\n                <span class="dz-upload block bg-indigo-200" data-dz-uploadprogress></span>\n            </div>\n        </div>\n    ')])],1)}),[],!1,null,null,null);e.default=c.exports}}]);
//# sourceMappingURL=66.js.map?id=ae5b3a5aa56213c2018c